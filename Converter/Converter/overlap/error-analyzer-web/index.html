<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide Error Analyzer - Ph√¢n T√≠ch L·ªói Slide</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üîç Slide Error Analyzer</h1>
            <p>Ph√¢n t√≠ch l·ªói v√† th·ªëng k√™ cho c√°c slide HTML</p>
        </header>

        <!-- Upload Section -->
        <section class="upload-section" id="uploadSection">
            <div class="upload-box">
                <div class="upload-icon">üìÅ</div>
                <h2>Import Slides</h2>
                <p>Ch·ªçn folder ch·ª©a slides (c·∫•u tr√∫c: slide_01/input.html + output.html) ho·∫∑c file ZIP</p>
                
                <div class="upload-buttons">
                    <label for="folderInput" class="btn btn-primary">
                        üìÇ Ch·ªçn Folder
                        <input type="file" id="folderInput" webkitdirectory directory multiple style="display: none;">
                    </label>
                    
                    <label for="zipInput" class="btn btn-secondary">
                        üì¶ Ch·ªçn ZIP
                        <input type="file" id="zipInput" accept=".zip" style="display: none;">
                    </label>
                </div>

                <div class="file-info" id="fileInfo" style="display: none;">
                    <p id="fileCount"></p>
                    <div class="structure-preview" id="structurePreview"></div>
                    <button class="btn btn-success" id="analyzeBtn">üî¨ Ph√¢n T√≠ch Ngay</button>
                </div>
            </div>
        </section>

        <!-- Loading -->
        <div class="loading" id="loading" style="display: none;">
            <div class="spinner"></div>
            <p>ƒêang ph√¢n t√≠ch slides...</p>
        </div>

        <!-- Results Section -->
        <section class="results-section" id="resultsSection" style="display: none;">
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="card card-highlight">
                    <div class="card-icon">‚≠ê</div>
                    <div class="card-content">
                        <h3 id="averageScore">0.00</h3>
                        <p>ƒêi·ªÉm TB / 10.00</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon">üìÑ</div>
                    <div class="card-content">
                        <h3 id="totalSlides">0</h3>
                        <p>T·ªïng s·ªë slides</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon error">‚ùå</div>
                    <div class="card-content">
                        <h3 id="totalErrors">0</h3>
                        <p>Text Overlaps</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon warning">‚ö†Ô∏è</div>
                    <div class="card-content">
                        <h3 id="containerOverflows">0</h3>
                        <p>Container Overflows</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon">üñ•Ô∏è</div>
                    <div class="card-content">
                        <h3 id="viewportOverflows">0</h3>
                        <p>Viewport Overflows</p>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
                <div class="chart-container" style="grid-column: 1 / -1;">
                    <h3>üìä S·ªë l∆∞·ª£ng l·ªói theo lo·∫°i (Click v√†o c·ªôt ƒë·ªÉ xem chi ti·∫øt)</h3>
                    <canvas id="errorTypeChart"></canvas>
                </div>
            </div>

            <!-- Error Details Modal -->
            <div class="error-details-modal" id="errorDetailsModal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalTitle">Chi ti·∫øt l·ªói</h3>
                        <button class="btn-close" id="closeModal">‚úï</button>
                    </div>
                    <div class="modal-body">
                        <div id="errorSlideList" class="slide-list"></div>
                    </div>
                </div>
            </div>

            <!-- Slide Preview Modal -->
            <div class="slide-preview-modal" id="slidePreviewModal" style="display: none;">
                <div class="modal-content-large">
                    <div class="modal-header">
                        <h3 id="slidePreviewTitle">Preview Slide</h3>
                        <button class="btn-close" id="closeSlidePreview">‚úï</button>
                    </div>
                    <div class="modal-body-slide">
                        <iframe id="slidePreviewFrame"></iframe>
                    </div>
                </div>
            </div>

            <!-- Detailed Errors Table -->
            <div class="errors-table">
                <div class="table-header">
                    <h3>Chi ti·∫øt l·ªói</h3>
                    <div class="table-controls">
                        <select id="filterSeverity">
                            <option value="all">T·∫•t c·∫£ m·ª©c ƒë·ªô</option>
                            <option value="error">L·ªói</option>
                            <option value="warning">C·∫£nh b√°o</option>
                            <option value="info">Th√¥ng tin</option>
                        </select>
                        <input type="text" id="searchError" placeholder="T√¨m ki·∫øm...">
                        <button class="btn btn-small" id="exportBtn">üì• Xu·∫•t CSV</button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table id="errorsTable">
                        <thead>
                            <tr>
                                <th>Slide</th>
                                <th>ƒêi·ªÉm</th>
                                <th>Lo·∫°i l·ªói</th>
                                <th>Overlap %</th>
                                <th>Element 1</th>
                                <th>Element 2</th>
                                <th>Chi ti·∫øt</th>
                            </tr>
                        </thead>
                        <tbody id="errorsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" id="newAnalysisBtn">üîÑ Ph√¢n t√≠ch m·ªõi</button>
                <button class="btn btn-secondary" id="downloadReportBtn">üìä T·∫£i b√°o c√°o</button>
            </div>
        </section>
    </div>

    <script src="analyzer.js"></script>
</body>
</html>
